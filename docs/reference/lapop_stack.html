<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>LAPOP Stacked Bar Graphs — lapop_stack • lapop</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="LAPOP Stacked Bar Graphs — lapop_stack"><meta property="og:description" content="This function shows a stacked bar graph using LAPOP formatting."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lapop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/lapop-r-labels.html">AmericasBarometer Labels Guide</a>
    </li>
    <li>
      <a href="../articles/lapop-visualization.html">LAPOP Visualization Guide</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>LAPOP Stacked Bar Graphs</h1>

    <div class="hidden name"><code>lapop_stack.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function shows a stacked bar graph using LAPOP formatting.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">lapop_stack</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  outcome_var <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">prop</span>,</span>
<span>  prop_labels <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">proplabel</span>,</span>
<span>  var_labels <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">varlabel</span>,</span>
<span>  value_labels <span class="op">=</span> <span class="va">data</span><span class="op">$</span><span class="va">vallabel</span>,</span>
<span>  xvar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lang <span class="op">=</span> <span class="st">"en"</span>,</span>
<span>  main_title <span class="op">=</span> <span class="st">""</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="st">""</span>,</span>
<span>  source_info <span class="op">=</span> <span class="st">""</span>,</span>
<span>  rev_values <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  rev_variables <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  hide_small_values <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  order_bars <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  subtitle_h_just <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  fixed_aspect_ratio <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  legendnrow <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  color_scheme <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#2D708E"</span>, <span class="st">"#008381"</span>, <span class="st">"#C74E49"</span>, <span class="st">"#784885"</span>, <span class="st">"#a43d6a"</span>, <span class="st">"#202020"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Data Frame. Dataset to be used for analysis.  The data frame should have columns
titled varlabel (name(s)/label(s) of variable(s) of interest; character), vallabel (names/labels of values for each variable; character),
prop (outcome variable value; numeric), and proplabel (text of outcome variable value; character).
Default: None (must be provided).</p></dd>


<dt id="arg-outcome-var-prop-labels-var-labels-value-labels">outcome_var, prop_labels, var_labels, value_labels<a class="anchor" aria-label="anchor" href="#arg-outcome-var-prop-labels-var-labels-value-labels"></a></dt>
<dd><p>Numeric, character, character, character.
Each component of the data to be plotted can be manually specified in case
the default columns in the data frame should not be used (if, for example, the values for a given
variable were altered and stored in a new column).</p></dd>


<dt id="arg-xvar">xvar<a class="anchor" aria-label="anchor" href="#arg-xvar"></a></dt>
<dd><p>Character. Column name to group the plots by. This should match a column name in the dataset.
Default: NULL (no grouping).</p></dd>


<dt id="arg-lang">lang<a class="anchor" aria-label="anchor" href="#arg-lang"></a></dt>
<dd><p>Character.  Changes default subtitle text and source info to either Spanish or English.
Will not translate input text, such as main title or variable labels.  Takes either "en" (English)
or "es" (Spanish).  Default: "en".</p></dd>


<dt id="arg-main-title">main_title<a class="anchor" aria-label="anchor" href="#arg-main-title"></a></dt>
<dd><p>Character.  Title of graph.  Default: None.</p></dd>


<dt id="arg-subtitle">subtitle<a class="anchor" aria-label="anchor" href="#arg-subtitle"></a></dt>
<dd><p>Character.  Describes the values/data shown in the graph, e.g., "Percent who support...".
Default: None.</p></dd>


<dt id="arg-source-info">source_info<a class="anchor" aria-label="anchor" href="#arg-source-info"></a></dt>
<dd><p>Character.  Information on dataset used (country, years, version, etc.),
which is added to the end of "Source: " in the bottom-left corner of the graph.
Default: None (only "Source: " will be printed).</p></dd>


<dt id="arg-rev-values">rev_values<a class="anchor" aria-label="anchor" href="#arg-rev-values"></a></dt>
<dd><p>Logical.  Should the order of the values for each variable be reversed?  Default: FALSE.</p></dd>


<dt id="arg-rev-variables">rev_variables<a class="anchor" aria-label="anchor" href="#arg-rev-variables"></a></dt>
<dd><p>Logical.  Should the order of the variables be reversed?  Default: FALSE.</p></dd>


<dt id="arg-hide-small-values">hide_small_values<a class="anchor" aria-label="anchor" href="#arg-hide-small-values"></a></dt>
<dd><p>Logical.  Should labels for categories with less than 5 percent be hidden?  Default: TRUE.</p></dd>


<dt id="arg-order-bars">order_bars<a class="anchor" aria-label="anchor" href="#arg-order-bars"></a></dt>
<dd><p>Logical.  Should categories be placed in descending order for each bar?  Default: FALSE.
showing the distributions of multiple categorical variables.</p></dd>


<dt id="arg-subtitle-h-just">subtitle_h_just<a class="anchor" aria-label="anchor" href="#arg-subtitle-h-just"></a></dt>
<dd><p>Numeric.  Move the subtitle/legend text left (negative numbers) or right (positive numbers).
Ranges from -100 to 100.  Default: 0.</p></dd>


<dt id="arg-fixed-aspect-ratio">fixed_aspect_ratio<a class="anchor" aria-label="anchor" href="#arg-fixed-aspect-ratio"></a></dt>
<dd><p>Logical.  Should the aspect ratio be set to a specific value (0.35)?
This prevents bars from stretching vertically to fit the plot area.  Set to false when you have
a large number of bars (&gt; 10).  Default: TRUE.</p></dd>


<dt id="arg-legendnrow">legendnrow<a class="anchor" aria-label="anchor" href="#arg-legendnrow"></a></dt>
<dd><p>Numeric.  How many rows for legend labels. Default: 1.</p></dd>


<dt id="arg-color-scheme">color_scheme<a class="anchor" aria-label="anchor" href="#arg-color-scheme"></a></dt>
<dd><p>Character.  Color of data bars for each value.  Allows up to 6 values.
Takes hex numbers, beginning with "#".
Default: c("#2D708E", "#008381", "#C74E49", "#784885", "#a43d6a","#202020")
(navy blue, turquoise, teal, green, sap green, pea soup).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>Returns an object of class <code>ggplot</code>, a ggplot stacked bar graph</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Luke Plutowski, <a href="mailto:luke.plutowski@vanderbilt.edu">luke.plutowski@vanderbilt.edu</a> &amp; Robert Vidigal, <a href="mailto:robert.vidigal@vanderbilt.edu">robert.vidigal@vanderbilt.edu</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>varlabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Politicians can\nidentify voters"</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                              <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Wealthy can\nbuy results"</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                              <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Votes are\ncounted correctly"</span>, <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 vallabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Always"</span>, <span class="st">"Often"</span>, <span class="st">"Sometimes"</span>,</span></span>
<span class="r-in"><span>                                  <span class="st">"Never"</span>, <span class="st">"Other"</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 prop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">36</span>, <span class="fl">10</span>, <span class="fl">19</span>, <span class="fl">25</span>, <span class="fl">10</span>, <span class="fl">46</span>, <span class="fl">10</span>, <span class="fl">23</span>, <span class="fl">11</span>, <span class="fl">10</span>, <span class="fl">35</span>,</span></span>
<span class="r-in"><span>                          <span class="fl">10</span>, <span class="fl">32</span>, <span class="fl">13</span>, <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 proplabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"36%"</span>, <span class="st">"10%"</span>, <span class="st">"19%"</span>, <span class="st">"25%"</span>, <span class="st">"10%"</span>, <span class="st">"46%"</span>,</span></span>
<span class="r-in"><span>                               <span class="st">"10%"</span>, <span class="st">"23%"</span>, <span class="st">"11%"</span>, <span class="st">"10%"</span>, <span class="st">"35%"</span>, <span class="st">"10%"</span>,</span></span>
<span class="r-in"><span>                               <span class="st">"32%"</span>, <span class="st">"13%"</span>, <span class="st">"10%"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">lapop_stack</span><span class="op">(</span><span class="va">df</span>,</span></span>
<span class="r-in"><span>         main_title <span class="op">=</span> <span class="st">"Trust in key features of the electoral process is low in Latin America"</span>,</span></span>
<span class="r-in"><span>         subtitle <span class="op">=</span> <span class="st">"% believing it happens:"</span>,</span></span>
<span class="r-in"><span>         source_info <span class="op">=</span> <span class="st">"2019"</span><span class="op">)</span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Robert Vidigal.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

