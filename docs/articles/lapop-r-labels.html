<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AmericasBarometer Labels Guide • lapop</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="AmericasBarometer Labels Guide">
<meta property="og:description" content="This vignette provides examples of how to use lapop helper functions to access AmericasBarometer question wording and response option labels in R.
">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lapop</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.0.9</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/lapop-r-labels.html">AmericasBarometer Labels Guide</a>
    </li>
    <li>
      <a href="../articles/lapop-visualization.html">LAPOP Visualization Guide</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>AmericasBarometer Labels Guide</h1>
            
      

      <div class="hidden name"><code>lapop-r-labels.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This concise guide demonstrates how R users can effectively work with
AmericasBarometer datasets to access variable metadata directly
eliminating the need for external codebooks. While these features are
more readily visible in STATA, they often require specific approaches in
R. The guide outlines:</p>
<ol style="list-style-type: decimal">
<li><p>The multilingual structure and storage of AmericasBarometer data
(including variable labels and value labels).</p></li>
<li><p>How to implement our custom LAPOP Lab functions for seamless
dataset analysis.</p></li>
</ol>
</div>
<div class="section level2">
<h2 id="installing-lapop-lab-package">Installing LAPOP Lab package<a class="anchor" aria-label="anchor" href="#installing-lapop-lab-package"></a>
</h2>
<p>The <code>lapop</code> package contains custom functions to analyze
data and plot figures following the LAPOP Lab’s guidelines.</p>
<p>If you do not have the LAPOP Lab package already installed in your
machine you can install it using the <code>devtools</code> package
below:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install the LAPOP Lab package:</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"https://github.com/lapop-central/lapop"</span>, force<span class="op">=</span><span class="cn">TRUE</span>, build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>After installation is successful, you will need to load the package
into your library:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">lapop</span><span class="op">)</span></span>
<span><span class="co"># Note: no need for lapop_fonts() since we are not plotting figures</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="how-lapop-lab-stores-variables-metadata">How LAPOP Lab stores variables metadata?<a class="anchor" aria-label="anchor" href="#how-lapop-lab-stores-variables-metadata"></a>
</h2>
<p>LAPOP Lab’s AmericasBarometer stores variable labels and value labels
in parallel languages (i.e., Spanish/English/Portuguese) directly within
the dataset structure. This allows researchers to access metadata
without external codebooks by:</p>
<p>Embedding language-specific labels as attributes in Stata-formatted
files and to use standardized variable naming conventions that maintain
consistency across survey waves since 2004. Therefore, Metadata is
structured to facilitate longitudinal analysis. The project employs
Stata-formatted datasets (.dta) with embedded metadata, preserving:</p>
<ul>
<li><p>Variable labels (i.e., question wording).</p></li>
<li><p>Value labels (i.e., responses options).</p></li>
<li><p>Missing value codes (i.e., Not Applicated, Don’t Know,
Refused).</p></li>
</ul>
<p>As a result, a key advantage is LAPOP Lab’s active metadata
preservation even when distributing data through third-party platforms
like ICPSR or NORC, the Stata-formatted metadata remains intact,
allowing R/python users to still access labels via the
<code>readstata13</code> package.</p>
</div>
<div class="section level2">
<h2 id="how-to-load-americasbarometer-data-in-r">How to load AmericasBarometer Data in R?<a class="anchor" aria-label="anchor" href="#how-to-load-americasbarometer-data-in-r"></a>
</h2>
<p>The preferred method for loading LAPOP Lab datasets is to use the
<code>read.dta13()</code> function from the <code>readstata13</code>
package. Below, I highlight a key difference between this recommended
approach and two alternative methods commonly used by researchers:
<code><a href="https://haven.tidyverse.org/reference/read_dta.html" class="external-link">haven::read_dta()</a></code> and <code><a href="http://gesistsa.github.io/rio/reference/import.html" class="external-link">rio::import()</a></code>.</p>
<p>In the R programming language, attributes are additional metadata
that can be attached to R objects. Attributes provide a way to store
extra information about an object beyond its basic data structure. To
access the attributes of an object, you can use the <code><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr()</a></code>
or <code><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes()</a></code> base functions.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># READSTATA13 PACKAGE (RECOMMENDED)</span></span>
<span><span class="va">data1</span> <span class="op">&lt;-</span> <span class="fu">readstata13</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/readstata13/man/read.dta13.html" class="external-link">read.dta13</a></span><span class="op">(</span><span class="st">"./BRA 2023 LAPOP AmericasBarometer (v1.0s).dta"</span>, </span>
<span>                                 generate.factors <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">data1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># HAVEN PACKAGE</span></span>
<span><span class="va">data2</span> <span class="op">&lt;-</span> <span class="fu">haven</span><span class="fu">::</span><span class="fu"><a href="https://haven.tidyverse.org/reference/read_dta.html" class="external-link">read_dta</a></span><span class="op">(</span><span class="st">"./BRA 2023 LAPOP AmericasBarometer (v1.0s).dta"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">data2</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># RIO PACKAGE</span></span>
<span><span class="va">data3</span> <span class="op">&lt;-</span> <span class="fu">rio</span><span class="fu">::</span><span class="fu"><a href="http://gesistsa.github.io/rio/reference/import.html" class="external-link">import</a></span><span class="op">(</span><span class="st">"./BRA 2023 LAPOP AmericasBarometer (v1.0s).dta"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">data3</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The methods <code>haven</code> and <code>rio</code> packages do not
recover all the metadata from <code>dta</code> files. Thereby, we
proceed with the dataset loaded with the <code>readstata13</code>
package.</p>
</div>
<div class="section level2">
<h2 id="extracting-americasbarometer-variables-labels-question-wording">Extracting AmericasBarometer Variables Labels (Question
Wording)<a class="anchor" aria-label="anchor" href="#extracting-americasbarometer-variables-labels-question-wording"></a>
</h2>
<p>AmericasBarometer variable labels are stored as <code>notes</code> in
STATA .dta files. We can find them inside the “expansion.fields”
attribute.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extracting attributes from expasion.fields</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">bra23</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">varlabels</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">bra23</span>, <span class="st">"expansion.fields"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Printing notes for varibale "ing4"</span></span>
<span><span class="va">varlabels</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"ing4"</span>, <span class="va">varlabels</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"note"</span>, <span class="va">varlabels</span><span class="op">)</span><span class="op">]</span></span></code></pre></div>
<p>The <code>varlabels</code> object created is a nested list (much like
a JSON object) that will contain multilingual notes with the question
wording of each variable. For instance, for the variable
<code>ing4</code> in the <code>Brazil AB 2023</code> dataset will
contain notes with the question wording and lead-in in English (note4
and note5), Spanish (note7 and note8), and Portuguese (note1 and
note2).</p>
</div>
<div class="section level2">
<h2 id="how-do-i-find-the-correct-language-labels">How do I find the correct language labels?<a class="anchor" aria-label="anchor" href="#how-do-i-find-the-correct-language-labels"></a>
</h2>
<p>It is important to keep in mind that note numbers may change across
countries datasets and years depending on the language the survey was
fielded. For Brazil, it is Brazilian-Portuguese, whereas in most other
countries it is in Spanish but also in English like in Jamaica.</p>
<p>A streamlined approach for users who want to quickly find the values
of the notes on variable labels without assigning to the dataset would
be assessing those notes directly with a combination of
<code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> and <code><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter()</a></code> functions from base R,
or also <code>compact()</code> and <code>map()</code> functions from the
<code>purrr</code> package.</p>
<p>Both approaches extract the third element (x[3]) from each list in
the “expansion.fields” attribute of the dataset, but only if the first
element (x[1]) equals “ing4” (i.e., the variable of interest). Both
produce a semi-structured list of matching third nested elements.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Base R approach:</span></span>
<span><span class="co"># The base R version uses lapply to iterate over the list and returns NULL when </span></span>
<span><span class="co"># the condition isn't met, then Filter(Negate(is.null), ...) removes those NULLs.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Filter</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Negate</a></span><span class="op">(</span><span class="va">is.null</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">bra23</span>, <span class="st">"expansion.fields"</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">==</span> <span class="st">"ing4"</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>note_id <span class="op">=</span> <span class="va">x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, note_value <span class="op">=</span> <span class="va">x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># purrr package approach</span></span>
<span><span class="co">#  The purrr version uses map() to do the same, and also remove NULL results. </span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_dfr</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">bra23</span>, <span class="st">"expansion.fields"</span><span class="op">)</span>, <span class="op">~</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">.x</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span> <span class="op">==</span> <span class="st">"ing4"</span><span class="op">)</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>note_id <span class="op">=</span> <span class="va">.x</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, note_value <span class="op">=</span> <span class="va">.x</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span></code></pre></div>
<p>To ease the researchers and analysts job, LAPOP Lab developed custom
functions to deal with those labels in R. First, we will use
<code>lpr_extract_notes</code> to transform the nested lists into a long
dataframe format that will contain 3 columns:
<code>variable_name</code>, <code>note_id</code>, and
<code>note_value</code></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Extract AB notes</span></span>
<span><span class="va">notes</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_extract_notes.html">lpr_extract_notes</a></span><span class="op">(</span><span class="va">varlabels</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">notes</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="co"># See columns names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">notes</span><span class="op">$</span><span class="va">note_id</span><span class="op">)</span> <span class="co"># See all different note information available!</span></span></code></pre></div>
<p>After extracting the notes, one can assign variable labels to their
preferred language as attributes to the dataset using another LAPOP Lab
function called <code><a href="../reference/lpr_set_attr.html">lpr_set_attr()</a></code> and than access it during
data analysis without the need of an accompanying codebook.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># English</span></span>
<span><span class="va">bra23</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/lpr_set_attr.html">lpr_set_attr</a></span><span class="op">(</span><span class="va">bra23</span>, <span class="va">notes</span>, noteid <span class="op">=</span> <span class="st">"note2"</span>, attribute_name <span class="op">=</span> <span class="st">"qwording_en"</span><span class="op">)</span> </span>
<span><span class="co"># Spanish</span></span>
<span><span class="va">bra23</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/lpr_set_attr.html">lpr_set_attr</a></span><span class="op">(</span><span class="va">bra23</span>, <span class="va">notes</span>, noteid <span class="op">=</span> <span class="st">"note1"</span>, attribute_name <span class="op">=</span> <span class="st">"qwording_es"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Portuguese</span></span>
<span><span class="va">bra23</span><span class="op">&lt;-</span><span class="fu"><a href="../reference/lpr_set_attr.html">lpr_set_attr</a></span><span class="op">(</span><span class="va">bra23</span>, <span class="va">notes</span>, noteid <span class="op">=</span> <span class="st">"note3"</span>, attribute_name <span class="op">=</span> <span class="st">"qwording_pt"</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="co"># Printing languages</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">bra23</span><span class="op">$</span><span class="va">ing4</span>, <span class="st">"qwording_en"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">bra23</span><span class="op">$</span><span class="va">ing4</span>, <span class="st">"qwording_es"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">bra23</span><span class="op">$</span><span class="va">ing4</span>, <span class="st">"qwording_pt"</span><span class="op">)</span> </span></code></pre></div>
</div>
<div class="section level2">
<h2 id="extracting-americasbarometer-values-labels-response-options">Extracting AmericasBarometer Values Labels (Response Options)<a class="anchor" aria-label="anchor" href="#extracting-americasbarometer-values-labels-response-options"></a>
</h2>
<p>AmericasBarometer’s values labels (i.e., response options)
differently from the variable labels are stored inside the “label.table”
attribute. To extract them we will use another LAPOP Lab custom function
called <code>lpr_format_labels</code> that will set up the response
options as an attribute across languages. Default language is English
and default attribute name is <code>roslabel</code> but the function
allows custom attribute names as shown below:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bra23</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_set_ros.html">lpr_set_ros</a></span><span class="op">(</span><span class="va">bra23</span><span class="op">)</span> <span class="co"># Default English</span></span>
<span></span>
<span><span class="va">bra23</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_set_ros.html">lpr_set_ros</a></span><span class="op">(</span><span class="va">bra23</span>, lang_id <span class="op">=</span> <span class="st">"es"</span>, </span>
<span>                     attribute_name <span class="op">=</span> <span class="st">"respuestas"</span><span class="op">)</span> <span class="co"># Spanish</span></span>
<span></span>
<span><span class="va">bra23</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_set_ros.html">lpr_set_ros</a></span><span class="op">(</span><span class="va">bra23</span>, lang_id <span class="op">=</span> <span class="st">"pt"</span>, </span>
<span>                     attribute_name <span class="op">=</span> <span class="st">"ROsLabels_pt"</span><span class="op">)</span> <span class="co"># Portuguese</span></span>
<span></span>
<span><span class="co"># Printing ROs</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">bra23</span><span class="op">$</span><span class="va">ing4</span>, <span class="st">"roslabel"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">bra23</span><span class="op">$</span><span class="va">ing4</span>, <span class="st">"respuestas"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">bra23</span><span class="op">$</span><span class="va">ing4</span>, <span class="st">"ROsLabels_pt"</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="takeaways-tldr">Takeaways (TLDR)<a class="anchor" aria-label="anchor" href="#takeaways-tldr"></a>
</h2>
<p><br></p>
<div class="section level3">
<h3 id="data-structure">Data Structure<a class="anchor" aria-label="anchor" href="#data-structure"></a>
</h3>
<p>AmericasBarometer datasets are distributed in Stata .dta format with
multilingual metadata (question wording and response options) embedded
as attributes. These support cross-national and longitudinal
comparability.</p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="preferred-loading-method">Preferred Loading Method<a class="anchor" aria-label="anchor" href="#preferred-loading-method"></a>
</h3>
<p>Use the readstata13::read.dta13() function to preserve full metadata
structure. Other methods such as <code><a href="https://haven.tidyverse.org/reference/read_dta.html" class="external-link">haven::read_dta()</a></code> or
<code><a href="http://gesistsa.github.io/rio/reference/import.html" class="external-link">rio::import()</a></code> often fail to import these critical
attributes.</p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="variable-labels-question-wording">Variable Labels (Question Wording):<a class="anchor" aria-label="anchor" href="#variable-labels-question-wording"></a>
</h3>
<p>Stored in the “expansion.fields” attribute. Use the custom
<code><a href="../reference/lpr_extract_notes.html">lpr_extract_notes()</a></code> function to convert this into a tidy
data frame.</p>
<p>Assign preferred language labels to each variable with
<code><a href="../reference/lpr_set_attr.html">lpr_set_attr()</a></code> using the appropriate noteid.</p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="value-labels-response-options">Value Labels (Response Options):<a class="anchor" aria-label="anchor" href="#value-labels-response-options"></a>
</h3>
<p>Stored in the “label.table” attribute. Use <code><a href="../reference/lpr_set_ros.html">lpr_set_ros()</a></code>
to assign these response labels as attributes in English, Spanish, or
Portuguese.</p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="quick-access-options">Quick Access Options<a class="anchor" aria-label="anchor" href="#quick-access-options"></a>
</h3>
<p>For advanced users, the guide also demonstrates streamlined methods
using <code><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply()</a></code> and <code><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr::map()</a></code> to quickly
view variable labels without modifying the dataset.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Robert Vidigal.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
