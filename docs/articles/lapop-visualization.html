<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>LAPOP Visualization Guide • lapop</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="LAPOP Visualization Guide">
<meta name="description" content="This vignette provides examples of how to use the LAPOP R package to create weighted visualizations with properly labeled facets.
">
<meta property="og:description" content="This vignette provides examples of how to use the LAPOP R package to create weighted visualizations with properly labeled facets.
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">lapop</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/lapop-r-labels.html">AmericasBarometer Labels Guide</a></li>
    <li><a class="dropdown-item" href="../articles/lapop-visualization.html">LAPOP Visualization Guide</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>LAPOP Visualization Guide</h1>
            
      

      <div class="d-none name"><code>lapop-visualization.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette demonstrates how to use the <code>lapop</code> package
to reproduce figures style from the 2023 <em>Pulse of Democracy</em>
report.</p>
<p>Attention: we are only using a subset from the data used in the
actual report.</p>
<p><a href="https://www.vanderbilt.edu/lapop/ab2023/AB2023-Pulse-of-Democracy-final-20240604.pdf" class="external-link">Read
the full report here</a></p>
</div>
<div class="section level2">
<h2 id="load-packages">Load Packages<a class="anchor" aria-label="anchor" href="#load-packages"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lapop-central.github.io/lapop/">lapop</a></span><span class="op">)</span></span></code></pre></div>
<p>The lapop package brings two datasets already with design effects
(weighted).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Single-country Single-year AmericasBarometer 2023 Brazil</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">bra23</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># AmericasBarometer 2006-2023 Brazil Merge</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">cm23</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># AmericasBarometer 2023 Year Merge</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ym23</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="reverse-variables">Reverse Variables<a class="anchor" aria-label="anchor" href="#reverse-variables"></a>
</h2>
<p>According to the LAPOP Editorial Guidelines, when variables are
measured on a scale, reversing them can enhance clarity and coherence in
data representation. For instance, if a survey question aims to measure
positive sentiment but higher numeric values indicate negative
responses, reversing the variable aligns the coding with the expected
direction of responses. This makes it easier for readers to understand
the findings.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cm23</span><span class="op">$</span><span class="va">aoj11r</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_resc.html">lpr_resc</a></span><span class="op">(</span><span class="va">cm23</span><span class="op">$</span><span class="va">aoj11</span>, reverse <span class="op">=</span> <span class="cn">TRUE</span>, map<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##                                </span></span>
<span><span class="co">##                                    0 0.333333333333333 0.666666666666667    1</span></span>
<span><span class="co">##   Muy seguro(a)                    0                 0                 0 3008</span></span>
<span><span class="co">##   Algo seguro(a)                   0                 0              5038    0</span></span>
<span><span class="co">##   Algo inseguro(a)                 0              2586                 0    0</span></span>
<span><span class="co">##   Muy inseguro(a)               2290                 0                 0    0</span></span>
<span><span class="co">##   No sabe                          0                 0                 0    0</span></span>
<span><span class="co">##   No responde                      0                 0                 0    0</span></span>
<span><span class="co">##   No se le preguntó en este año    0                 0                 0    0</span></span></code></pre>
<div class="section level3">
<h3 id="survey-design-for-the-data">Survey Design for the Data<a class="anchor" aria-label="anchor" href="#survey-design-for-the-data"></a>
</h3>
<p>The AmericasBarometer use <code>weight1500</code> for comparative
datasets by time or country, <code>wt</code> weights are only for
country specific datasets (single-country single-year). In the
AmericasBarometer the primary sampling units (ids = upm) and
stratification variable (strata = strata) to account for the survey’s
complex design. Finally, PSUs are nested within strata, properly
reflecting the survey’s hierarchical sampling structure. The
<code><a href="../reference/lpr_data.html">lpr_data()</a></code> function apply survey design effects.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Single-Country Single-Year</span></span>
<span><span class="va">bra23w</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_data.html">lpr_data</a></span><span class="op">(</span><span class="va">bra23</span>, wt <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">bra23w</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Stratified 1 - level Cluster Sampling design (with replacement)</span></span>
<span><span class="co">## With (125) clusters.</span></span>
<span><span class="co">## Called via srvyr</span></span>
<span><span class="co">## Sampling variables:</span></span>
<span><span class="co">##   - ids: upm </span></span>
<span><span class="co">##   - strata: strata </span></span>
<span><span class="co">##   - weights: wt </span></span>
<span><span class="co">## Data variables: </span></span>
<span><span class="co">##   - aoj11 (fct), ing4 (int), b13 (int), b21 (int), b31 (int), b12 (int), wave</span></span>
<span><span class="co">##     (fct), pais (fct), year (fct), upm (int), strata (dbl), wt (dbl), pais_lab</span></span>
<span><span class="co">##     (chr)</span></span></code></pre>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Single-Country Multi-Year</span></span>
<span><span class="va">cm23w</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_data.html">lpr_data</a></span><span class="op">(</span><span class="va">cm23</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cm23w</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Stratified 1 - level Cluster Sampling design (with replacement)</span></span>
<span><span class="co">## With (3943) clusters.</span></span>
<span><span class="co">## Called via srvyr</span></span>
<span><span class="co">## Sampling variables:</span></span>
<span><span class="co">##   - ids: upm </span></span>
<span><span class="co">##   - strata: strata </span></span>
<span><span class="co">##   - weights: weight1500 </span></span>
<span><span class="co">## Data variables: </span></span>
<span><span class="co">##   - aoj11 (fct), ing4 (int), b13 (int), b21 (int), b31 (int), b12 (int), wave</span></span>
<span><span class="co">##     (fct), pais (fct), year (fct), upm (int), strata (dbl), wt (dbl),</span></span>
<span><span class="co">##     weight1500 (dbl), aoj11r (dbl), pais_lab (chr)</span></span></code></pre>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Multi-Country Single-Year</span></span>
<span><span class="va">ym23w</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_data.html">lpr_data</a></span><span class="op">(</span><span class="va">ym23</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">ym23w</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Stratified 1 - level Cluster Sampling design (with replacement)</span></span>
<span><span class="co">## With (7856) clusters.</span></span>
<span><span class="co">## Called via srvyr</span></span>
<span><span class="co">## Sampling variables:</span></span>
<span><span class="co">##   - ids: upm </span></span>
<span><span class="co">##   - strata: strata </span></span>
<span><span class="co">##   - weights: weight1500 </span></span>
<span><span class="co">## Data variables: </span></span>
<span><span class="co">##   - b12 (dbl+lbl), b18 (dbl+lbl), wave (dbl+lbl), pais (dbl+lbl), year</span></span>
<span><span class="co">##     (dbl+lbl), ing4 (dbl+lbl), pn4 (dbl+lbl), vb21n (dbl+lbl), q14f (dbl+lbl),</span></span>
<span><span class="co">##     edre (dbl+lbl), wealth (dbl), q1tc_r (dbl+lbl), upm (dbl+lbl), strata</span></span>
<span><span class="co">##     (dbl), weight1500 (dbl), pais_lab (chr)</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="fonts-for-2023-pulse-of-democracy-report-">Fonts for 2023 <em>Pulse of Democracy</em> report.<a class="anchor" aria-label="anchor" href="#fonts-for-2023-pulse-of-democracy-report-"></a>
</h2>
<p>Running <code><a href="../reference/lapop_fonts.html">lapop_fonts()</a></code> at the start of your analysis
ensures that all exported charts have a polished, standardized
appearance to ensure consistent and professional typography in all LAPOP
plots. This function loads Nunito and Roboto fonts.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/lapop_fonts.html">lapop_fonts</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="figure-1-1-time-series">Figure 1.1: Time Series<a class="anchor" aria-label="anchor" href="#figure-1-1-time-series"></a>
</h2>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fig1.1_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_ts.html">lpr_ts</a></span><span class="op">(</span><span class="va">cm23w</span>, outcome <span class="op">=</span> <span class="st">"ing4"</span>, rec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, use_wave <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/lapop_ts.html">lapop_ts</a></span><span class="op">(</span><span class="va">fig1.1_data</span>,</span>
<span>         ymin <span class="op">=</span> <span class="fl">50</span>,</span>
<span>         ymax <span class="op">=</span> <span class="fl">80</span>,</span>
<span>         main_title <span class="op">=</span> <span class="st">"Support for democracy decline a decade ago and remains comparatively low in Brazil"</span>,</span>
<span>         subtitle <span class="op">=</span> <span class="st">"% who support democracy"</span><span class="op">)</span></span></code></pre></div>
<p><img src="lapop-visualization_files/figure-html/time%20series-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="figure-1-2-cross-country-comparison">Figure 1.2: Cross-Country Comparison<a class="anchor" aria-label="anchor" href="#figure-1-2-cross-country-comparison"></a>
</h2>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fig1.2_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_cc.html">lpr_cc</a></span><span class="op">(</span><span class="va">ym23w</span>, outcome <span class="op">=</span> <span class="st">"ing4"</span>, rec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/lapop_cc.html">lapop_cc</a></span><span class="op">(</span><span class="va">fig1.2_data</span>,</span>
<span>         main_title <span class="op">=</span> <span class="st">"In many countries, only about one in two adults support democracy"</span>,</span>
<span>         subtitle <span class="op">=</span> <span class="st">"% who support democracy"</span><span class="op">)</span></span></code></pre></div>
<p><img src="lapop-visualization_files/figure-html/cross%20country-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="figure-2-1-multi-line-over-time">Figure 2.1: Multi-line Over Time<a class="anchor" aria-label="anchor" href="#figure-2-1-multi-line-over-time"></a>
</h2>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fig2.1_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_mline.html">lpr_mline</a></span><span class="op">(</span><span class="va">cm23w</span>,</span>
<span>                         outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b13"</span>, <span class="st">"b21"</span>, <span class="st">"b31"</span><span class="op">)</span>,</span>
<span>                         rec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, rec2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>, rec3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Changing legend for readibility</span></span>
<span><span class="va">fig2.1_data</span><span class="op">$</span><span class="va">varlabel</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">fig2.1_data</span><span class="op">$</span><span class="va">varlabel</span> <span class="op">==</span> <span class="st">"b13"</span>, <span class="st">"National Legislature"</span>, </span>
<span>                          <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">fig2.1_data</span><span class="op">$</span><span class="va">varlabel</span><span class="op">==</span><span class="st">"b21"</span>, <span class="st">"Political Parties"</span>,</span>
<span>                                 <span class="st">"Supreme Court"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/lapop_mline.html">lapop_mline</a></span><span class="op">(</span><span class="va">fig2.1_data</span>,</span>
<span>            main_title <span class="op">=</span> <span class="st">"Trust in executives has declined to a level similar to other political institutions"</span>,</span>
<span>            subtitle <span class="op">=</span> <span class="st">"% who trust..."</span><span class="op">)</span></span></code></pre></div>
<p><img src="lapop-visualization_files/figure-html/mline-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="figure-2-3-cc-multiple-variables">Figure 2.3: CC Multiple Variables<a class="anchor" aria-label="anchor" href="#figure-2-3-cc-multiple-variables"></a>
</h2>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fig2.3_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_ccm.html">lpr_ccm</a></span><span class="op">(</span><span class="va">ym23w</span>,</span>
<span>                       outcome_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"b12"</span>, <span class="st">"b18"</span><span class="op">)</span>,</span>
<span>                       rec1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span>,</span>
<span>                       rec2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Changing legend for readibility</span></span>
<span><span class="va">fig2.3_data</span><span class="op">$</span><span class="va">var</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">fig2.3_data</span><span class="op">$</span><span class="va">var</span> <span class="op">==</span> <span class="st">"b12"</span>, <span class="st">"Armed Forces"</span>, <span class="st">"National Police"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/lapop_ccm.html">lapop_ccm</a></span><span class="op">(</span><span class="va">fig2.3_data</span>,</span>
<span>          main_title <span class="op">=</span> <span class="st">"The public typically reports more trust in the armed forces than the police, but levels vary"</span>,</span>
<span>          subtitle <span class="op">=</span> <span class="st">"% who trust..."</span><span class="op">)</span></span></code></pre></div>
<p><img src="lapop-visualization_files/figure-html/ccm-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="figure-mover-example-satisfaction-with-democracy">Figure Mover Example: Satisfaction with Democracy<a class="anchor" aria-label="anchor" href="#figure-mover-example-satisfaction-with-democracy"></a>
</h2>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">ym23w</span><span class="op">$</span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="va">ym23w</span><span class="op">$</span><span class="va">variables</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    edrer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">edre</span><span class="op">)</span>,</span>
<span>    gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">q1tc_r</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>edrer <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">edrer</span> <span class="op">&lt;=</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"None/Primary"</span>,</span>
<span>    <span class="va">edrer</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span> <span class="op">~</span> <span class="st">"Secondary"</span>,</span>
<span>    <span class="va">edrer</span> <span class="op">&gt;</span> <span class="fl">4</span> <span class="op">~</span> <span class="st">"Superior"</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span></span>
<span>  <span class="op">)</span>, </span>
<span>  edrer <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">edrer</span>, levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"None/Primary"</span>, <span class="st">"Secondary"</span>, <span class="st">"Superior"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  </span>
<span>  gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">q1tc_r</span> <span class="op">==</span> <span class="fl">3</span>, <span class="cn">NA</span>, <span class="va">q1tc_r</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>gender <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="va">gender</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="st">"Men"</span>,</span>
<span>    <span class="va">gender</span> <span class="op">==</span> <span class="fl">2</span> <span class="op">~</span> <span class="st">"Women"</span>,</span>
<span>     <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA_character_</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Changing legend for readibility </span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">ym23w</span><span class="op">$</span><span class="va">variables</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="st">"Gender"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">ym23w</span><span class="op">$</span><span class="va">variables</span><span class="op">$</span><span class="va">edrer</span><span class="op">)</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="st">"Education"</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">ym23w</span><span class="op">$</span><span class="va">variables</span><span class="op">$</span><span class="va">wealth</span><span class="op">)</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="st">"Wealth"</span></span>
<span></span>
<span><span class="va">fig_mover</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_mover.html">lpr_mover</a></span><span class="op">(</span><span class="va">ym23w</span>,</span>
<span>                       outcome <span class="op">=</span> <span class="st">"pn4"</span>,</span>
<span>                       grouping_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"edrer"</span>, <span class="st">"wealth"</span><span class="op">)</span>,</span>
<span>                       rec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu"><a href="../reference/lapop_mover.html">lapop_mover</a></span><span class="op">(</span><span class="va">fig_mover</span>,</span>
<span>            main_title <span class="op">=</span> <span class="st">"Satisfaction with democracy is significantly lower among women, those with higher educational attainment, and the middle class"</span>,</span>
<span>            subtitle <span class="op">=</span> <span class="st">"% who are satisfied with democracy"</span><span class="op">)</span></span></code></pre></div>
<p><img src="lapop-visualization_files/figure-html/mover-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="figure-histogram-citizens-views">Figure Histogram: Citizens’ Views<a class="anchor" aria-label="anchor" href="#figure-histogram-citizens-views"></a>
</h2>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">spot32_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_hist.html">lpr_hist</a></span><span class="op">(</span><span class="va">ym23w</span>, outcome <span class="op">=</span> <span class="st">"vb21n"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Translating to English</span></span>
<span><span class="va">spot32_data</span><span class="op">$</span><span class="va">cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Vote"</span>, <span class="st">"Run for\noffice"</span>, </span>
<span>                     <span class="st">"Protest"</span>, </span>
<span>                     <span class="st">"Participate\nin local orgs."</span>, </span>
<span>                     <span class="st">"Other"</span>, </span>
<span>                     <span class="st">"Change is\nimpossible"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/lapop_hist.html">lapop_hist</a></span><span class="op">(</span><span class="va">spot32_data</span>,</span>
<span>           main_title <span class="op">=</span> <span class="st">"On average in the LAC region, one in three say voting is the best way to influence change"</span>,</span>
<span>           subtitle <span class="op">=</span> <span class="st">"How do you believe you can best influence change?"</span><span class="op">)</span></span></code></pre></div>
<p><img src="lapop-visualization_files/figure-html/histogram-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="figure-3-5-dumbell-plot">Figure 3.5: Dumbell Plot<a class="anchor" aria-label="anchor" href="#figure-3-5-dumbell-plot"></a>
</h2>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fig3.5_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_dumb.html">lpr_dumb</a></span><span class="op">(</span><span class="va">ym23w</span>,</span>
<span>                        outcome <span class="op">=</span> <span class="st">"q14f"</span>,</span>
<span>                        rec <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span>,</span>
<span>                        over <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2018</span>, <span class="fl">2023</span><span class="op">)</span>,</span>
<span>                        xvar <span class="op">=</span> <span class="st">"pais"</span>,</span>
<span>                        ttest <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Select Countries</span></span>
<span><span class="va">fig3.5_data</span> <span class="op">&lt;-</span> <span class="va">fig3.5_data</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,<span class="fl">5</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span>, <span class="op">]</span></span>
<span></span>
<span><span class="fu"><a href="../reference/lapop_dumb.html">lapop_dumb</a></span><span class="op">(</span><span class="va">fig3.5_data</span>,</span>
<span>           main_title <span class="op">=</span> <span class="st">"Among those with emigration intentions, the percentage who say they are very likely to emigrate increased in Nicaragua and Guatemala"</span>,</span>
<span>           subtitle <span class="op">=</span> <span class="st">"% who say it is very likely they will emigrate"</span><span class="op">)</span></span></code></pre></div>
<p><img src="lapop-visualization_files/figure-html/dumbell-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="figure-3-8-stack-plot-by-country">Figure 3.8: Stack Plot by Country<a class="anchor" aria-label="anchor" href="#figure-3-8-stack-plot-by-country"></a>
</h2>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/attributes.html" class="external-link">attributes</a></span><span class="op">(</span><span class="va">ym23w</span><span class="op">$</span><span class="va">variables</span><span class="op">$</span><span class="va">q14f</span><span class="op">)</span><span class="op">$</span><span class="va">label</span> <span class="op">&lt;-</span> <span class="st">"Migration intentions"</span></span>
<span></span>
<span><span class="va">fig3.8_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/lpr_stack.html">lpr_stack</a></span><span class="op">(</span><span class="va">ym23w</span>,</span>
<span>                         outcome <span class="op">=</span> <span class="st">"q14f"</span>,</span>
<span>                         xvar <span class="op">=</span> <span class="st">"pais"</span>,</span>
<span>                         order <span class="op">=</span> <span class="st">"hi-lo"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/lapop_stack.html">lapop_stack</a></span><span class="op">(</span><span class="va">fig3.8_data</span>,</span>
<span>            xvar <span class="op">=</span> <span class="st">"xvar_label"</span>,</span>
<span>            source <span class="op">=</span> <span class="st">", AmericasBarometer 2023"</span>,</span>
<span>            main_title <span class="op">=</span> <span class="st">"Nicaragua has the highest percentage of individuals with migration intentions, while Haiti has the lowest"</span><span class="op">)</span></span></code></pre></div>
<p><img src="lapop-visualization_files/figure-html/stack-1.png" width="960"></p>
</div>
<div class="section level2">
<h2 id="end">End<a class="anchor" aria-label="anchor" href="#end"></a>
</h2>
<p>This vignette is intended as a <strong>template and starting
point</strong> for your own reports and exploratory visualizations using
LAPOP data.</p>
<p>By adapting these examples, you can produce <strong>consistent,
high-quality charts</strong> that follow the LAPOP Lab’s editorial
guidelines and communicate survey results effectively.</p>
<p>For further guidance:</p>
<ul>
<li>
<strong>Function documentation:</strong> See the package help pages
for detailed arguments and examples (e.g., <code><a href="../reference/lpr_cc.html">?lpr_cc</a></code>,
<code><a href="../reference/lapop_cc.html">?lapop_cc</a></code>).</li>
<li>
<strong>Editorial guidelines:</strong> Follow LAPOP Lab’s
recommendations for plot labeling to ensure clarity and
comparability.</li>
<li>
<strong>More articles:</strong> Check other vignettes and the <a href="https://lapop-central.github.io/lapop/">pkgdown site</a> for
additional tutorials and updates.</li>
</ul>
<p>If you encounter any issues or have suggestions for improvement,
please let us know via our <a href="https://github.com/lapop-central/lapop/issues" class="external-link">GitHub issues
page</a>.</p>
<p>Thank you for using the <strong>LAPOP R package</strong> to help make
high-quality, reproducible social science research easier and more
accessible!</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Vidigal.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
