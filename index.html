<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Tools for Visualizing and Labeling AmericasBarometer Data in R ‚Ä¢ lapop</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Tools for Visualizing and Labeling AmericasBarometer Data in R">
<meta name="description" content="Provides tools for processing and visualizing survey data from the Americas Barometer. The package includes functions for labeling, weighting, and plotting data following custom style guidelines for use in reports, presentations, and social media posts. The Center for Global Democracy (formerly the Latin American Public Opinion Project) at Vanderbilt University is a leader in public survey research, best known for the Americas Barometer project. The publicly available data can be downloaded from: &lt;https://www.vanderbilt.edu/lapop/data-access.php&gt;.">
<meta property="og:description" content="Provides tools for processing and visualizing survey data from the Americas Barometer. The package includes functions for labeling, weighting, and plotting data following custom style guidelines for use in reports, presentations, and social media posts. The Center for Global Democracy (formerly the Latin American Public Opinion Project) at Vanderbilt University is a leader in public survey research, best known for the Americas Barometer project. The publicly available data can be downloaded from: &lt;https://www.vanderbilt.edu/lapop/data-access.php&gt;.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">lapop</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/lapop-r-labels.html">AmericasBarometer Labels Guide</a></li>
    <li><a class="dropdown-item" href="articles/lapop-visualization.html">LAPOP Visualization Guide</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="lapop-r-package">lapop R package<a class="anchor" aria-label="anchor" href="#lapop-r-package"></a>
</h1></div>
<p>These are helper functions to wrangle labels and produce visualizations of AmericasBarometer data following LAPOP Lab‚Äôs editorial guidelines.</p>
<p>üîó <strong>Package website:</strong> <a href="https://lapop-central.github.io/lapop/">https://lapop-central.github.io/lapop/</a></p>
<hr>
<div class="section level2">
<h2 id="id_Ô∏è-installation">üõ†Ô∏è Installation<a class="anchor" aria-label="anchor" href="#id_%EF%B8%8F-installation"></a>
</h2>
<p>To install the package in your R console, run:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"lapop-central/lapop"</span>, </span>
<span>                         force <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                         build_vignettes <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="id_Ô∏è-workflow-americasbarometer-variable--value-labels">‚öôÔ∏è Workflow: AmericasBarometer Variable &amp; Value Labels<a class="anchor" aria-label="anchor" href="#id_%EF%B8%8F-workflow-americasbarometer-variable--value-labels"></a>
</h2>
<p>For the full online guide, see:</p>
<p><a href="https://lapop-central.github.io/lapop/articles/lapop-r-labels.html" target="_blank">üìñ LAPOP Data Guide for R Users (pkgdown article)</a></p>
<div class="section level3">
<h3 id="id_1-data-structure">1. Data Structure<a class="anchor" aria-label="anchor" href="#id_1-data-structure"></a>
</h3>
<p>AmericasBarometer datasets are distributed in Stata <code>.dta</code> format with multilingual metadata (question wording and response options) embedded as attributes. These support cross-national and longitudinal comparability.</p>
</div>
<div class="section level3">
<h3 id="id_2-preferred-loading-method">2. Preferred Loading Method<a class="anchor" aria-label="anchor" href="#id_2-preferred-loading-method"></a>
</h3>
<p>Use:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">readstata13</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/readstata13/man/read.dta13.html" class="external-link">read.dta13</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>to preserve the full metadata structure.</p>
<p>Other methods such as <code><a href="https://haven.tidyverse.org/reference/read_dta.html" class="external-link">haven::read_dta()</a></code> or <code><a href="http://gesistsa.github.io/rio/reference/import.html" class="external-link">rio::import()</a></code> may fail to import the STATA attributes.</p>
</div>
<div class="section level3">
<h3 id="id_3-variable-labels-question-wording">3. Variable Labels (Question Wording)<a class="anchor" aria-label="anchor" href="#id_3-variable-labels-question-wording"></a>
</h3>
<ul>
<li>Stored in the <code>expansion.fields</code> attribute.</li>
<li>Use <code><a href="reference/lpr_extract_notes.html">lpr_extract_notes()</a></code> to convert into a tidy data frame.</li>
<li>Assign preferred language labels with <code><a href="reference/lpr_set_attr.html">lpr_set_attr()</a></code> using the appropriate <code>noteid</code>.</li>
</ul>
</div>
<div class="section level3">
<h3 id="id_4-value-labels-response-options">4. Value Labels (Response Options)<a class="anchor" aria-label="anchor" href="#id_4-value-labels-response-options"></a>
</h3>
<ul>
<li>Stored in the <code>label.table</code> attribute.</li>
<li>Use <code><a href="reference/lpr_set_ros.html">lpr_set_ros()</a></code> to assign these response labels in English, Spanish, or Portuguese.</li>
</ul>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="id_-workflow-americasbarometer-data-visualization">üé® Workflow: AmericasBarometer Data Visualization<a class="anchor" aria-label="anchor" href="#id_-workflow-americasbarometer-data-visualization"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<p>Load the package in R:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lapop-central.github.io/lapop/">lapop</a></span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Load LAPOP Lab fonts:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/lapop_fonts.html">lapop_fonts</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Apply the AmericasBarometer design effects with:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/lpr_data.html">lpr_data</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</li>
<li>
<p>Choose the appropriate <code>lpr</code> graph type:</p>
<ul>
<li>Histograms: <code><a href="reference/lpr_hist.html">lpr_hist()</a></code>
</li>
<li>Cross-country comparison: <code><a href="reference/lpr_cc.html">lpr_cc()</a></code>
</li>
<li>Time series: <code><a href="reference/lpr_ts.html">lpr_ts()</a></code>
</li>
<li>Breakdown by covariates: <code><a href="reference/lpr_mover.html">lpr_mover()</a></code>
</li>
</ul>
</li>
</ol>
<p>
</p>
<ol start="5" style="list-style-type: decimal">
<li>
<p>Store the output in an R object.</p>

<ul>
<li><p>File names: .csv and graphics files should have the same name. Their names should be in the following standard format: CountryYear/ts_DVcode(s)_IVcode(s)_graphtype.extension.</p></li>
<li>
<p>Examples:</p>
<ul>
<li>mex21_countfair1_hist.csv</li>
<li>hnd_b4_ts.svg</li>
<li>ab23_vic1ext_pais_cc.svg</li>
</ul>
</li>
<li><p>There will be some cases that do not easily fit this standard. Use your best judgment.</p></li>
</ul>
</li>
<li>
<p>Use the corresponding <code>lapop</code> plotting function to produce the visualization:</p>
<ul>
<li>Examples: <code><a href="reference/lapop_hist.html">lapop_hist()</a></code>, <code><a href="reference/lapop_cc.html">lapop_cc()</a></code>, <code><a href="reference/lapop_ts.html">lapop_ts()</a></code>, etc.</li>
</ul>
</li>
</ol>
<p>
</p>
<ol start="7" style="list-style-type: decimal">
<li>Export the figure to your machine with:

<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/lapop_save.html">lapop_save</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<hr>
</li>
</ol>
</div>
<div class="section level2">
<h2 id="id_-workflow-contributing-to-the-lapop-r-package">ü§ù Workflow: Contributing to the <code>lapop</code> R Package<a class="anchor" aria-label="anchor" href="#id_-workflow-contributing-to-the-lapop-r-package"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<strong>Fork</strong> the repository and clone it to your local machine.</li>
<li>
<strong>Create a new branch</strong> for your feature or fix.</li>
<li>Add your new function in the <code>R/</code> folder.</li>
<li>Document the function with roxygen2 comments.</li>
<li>Run <code>devtools::document()</code> to generate <code>.Rd</code> files in <code>man/</code> and update <code>NAMESPACE</code>.</li>
<li>Commit your changes and push the branch to your fork.</li>
<li>Submit a <strong>pull request</strong> to the main repository.</li>
<li>If you find a bug, please consider donatcontributing to the lapop package ‚Äî we spent all our money on coffee and data cleaning.</li>
</ol>
<hr>
<!-- badges: start -->
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing lapop</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Robert Vidigal <br><small class="roles"> Maintainer, author </small> <a href="https://orcid.org/0000-0001-5713-119X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Luke Plutowski <br><small class="roles"> Contributor, author </small> <a href="https://orcid.org/0000-0001-8240-6722" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/lapop-central/lapop-viz/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/lapop-central/lapop-viz/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://github.com/lapop-central/lapop/stargazers" class="external-link"><img src="https://img.shields.io/github/stars/lapop-central/lapop.svg?style=social&amp;label=Star&amp;maxAge=3600" alt="GitHub stars"></a></li>
<li><a href="https://twitter.com/intent/tweet?url=https://github.com/lapop-central/lapop&amp;text=Check%20out%20the%20lapop%20R%20package%20for%20working%20with%20the%20AmericasBarometer%20data!%20%23rstats%20%23lapop%20%23AmericasBarometer%20%23opensource" class="external-link"><img src="https://cdn.prod.website-files.com/5e0f1144930a8bc8aace526c/65dd9eb5aaca434fac4f1ca4_shields.io.svg" alt="Tweet"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Robert Vidigal, Luke Plutowski.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
